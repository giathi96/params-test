/*
    def remote = [:]
    remote.name = 'sil-toolserver-1'
    remote.host = '10.134.134.10'
    remote.user = 'cust'
    remote.password = 'AvayaSIL123$'
    remote.allowAnyHosts = true
*/

pipeline {
    agent any
    stages {
        stage('Copy file to Linux Build Server') {
            steps {
                echo "STAGE: Copy file to Linux Build Server"
                echo "Final: ${params['test ne']}"
                script{
                    //features = Tenant_Features.split(',').collect{it as String}
                    features = "${params['Tenant Features']}".split(',').collect{it as String}
                    command = "python3 app.py --lab ${Lab}.replaceAll("\\s","") --task ${task}.replaceAll("\\s","") "
                    if("${params['Tenant Index']}" != ""){
                        command += "--tenantid " + "${params['Tenant Index']}".replaceAll("\\s","") + " "
                    }
                    if(features.size() > 1){
                        command += "--features "
                        for(i = 0; i < features.size(); i++){
                            features[i].replaceAll("\\s","")
                            command += features[i] + " "
                        }
                    }
                }
                echo "Command: ${command}"
            }
        }
        stage('Placing files') {
            steps {
                echo 'STAGE: Placing files'
            }
        }
        stage('Configuration') {
            steps {
                echo "STAGE: CONFIGURATION"
            }
        }
        stage('Login Agent') {
            steps {
                echo "STAGE: LOGIN AGENT"
            }
        }

        stage('Inject Traffic Test') {
            steps {
                echo "STAGE: Inject Traffic Test"
            }
        }

        stage('Other stages') {
            steps {
                echo "STAGE: ...."
            }
        }        
    }
}

        
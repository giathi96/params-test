/*
    def remote = [:]
    remote.name = 'sil-toolserver-1'
    remote.host = '10.134.134.10'
    remote.user = 'cust'
    remote.password = 'AvayaSIL123$'
    remote.allowAnyHosts = true
*/

pipeline {
    agent any
    stages {
        stage('Copy file to Linux Build Server') {
            steps {
                echo "STAGE: Copy file to Linux Build Server"
                script{
                    features = "${params['Tenant Features']}".replaceAll("\\s"," ")
                    lab = "${params['Lab']}".replaceAll("\\s","")
                    task = "${params['Task']}".replaceAll("\\s","")
                    id = "${params['Tenant Index']}".replaceAll("\\s","")
                    if(id != ""){
                        command += "--tenantid " + "${params['Tenant Index']}".replaceAll("\\s","") + " "
                    }
                    command = "python3 app.py --lab ${lab} --task ${task}"
                    if(features != ""){
                        command += "--features ${features}"
                    }
                }
                echo "Command: ${command}"
            }
        }
        stage('Placing files') {
            steps {
                echo 'STAGE: Placing files'
            }
        }
        stage('Configuration') {
            steps {
                echo "STAGE: CONFIGURATION"
            }
        }
        stage('Login Agent') {
            steps {
                echo "STAGE: LOGIN AGENT"
            }
        }

        stage('Inject Traffic Test') {
            steps {
                echo "STAGE: Inject Traffic Test"
            }
        }

        stage('Other stages') {
            steps {
                echo "STAGE: ...."
            }
        }        
    }
}

        